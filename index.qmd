---
title: "Bruprosjekt"
---

```{python}
import pandas as pd
import plotly.io as pio
import plotly.express as px
from datetime import date

pio.renderers.default = "plotly_mimetype+notebook_connected"
```

Foreløpige resultater fra bruprosjektet i Mekanikk 1 på NTNU, Ålesund.

```{python}
#| echo: false
df = pd.read_csv("https://docs.google.com/spreadsheets/d/e/2PACX-1vS3PhQMmp5GAlPNAY3q3I9gx_tVuLPRFUMNK2-d3B2ux9ur-pQvnAfwXBr3uJEJpAZvj3aa2MV-uaWP/pub?gid=0&single=true&output=csv", encoding="utf-8" )[["Gruppe", "Egenvekt", "Påsatt vekt","Forholdstall"]]

render_date = date.today().strftime("%Y-%m-%d")


for col in ["Egenvekt", "Påsatt vekt", "Forholdstall"]:
    df[col] = df[col].str.replace(",", ".").astype(float)

# Convert Gruppe to int
df["Gruppe"] = df["Gruppe"].astype(int)

df = df.dropna(subset=["Egenvekt"])
```

```{python}
#| echo: false
#| layout-align: center
fig = px.scatter(df, x="Egenvekt", y="Påsatt vekt", size="Forholdstall",
                 hover_name="Gruppe", color="Forholdstall", log_x=False, log_y=False, size_max=15, color_continuous_scale=px.colors.sequential.Sunset)

fig.update_traces(
    hovertemplate="Gruppe: %{customdata[0]}<br>Egenvekt: %{x:.0f} g<br>Påsatt vekt: %{y:.0f} g<br>Forholdstall: %{customdata[1]:.1f}",
    customdata=df[["Gruppe", "Forholdstall"]]  # needs to be 2D array or dataframe
)
fig.update_layout(
    title_font_size=18,
    title_x=0.5,
    xaxis_title="Egenvekt [gram]",
    yaxis_title="Påsatt vekt [gram]",
    font=dict(size=14),
    hoverlabel=dict(bgcolor="white")
)
# Format axes to show full numbers (no 'k')
fig.update_xaxes(
    title="Egenvekt (gram)",
    tickformat=",.0f"   # Full integer format
)
fig.update_yaxes(
    title="Påsatt vekt (gram)",
    tickformat="..0f"
)

fig.show()
```